/*! co-work - v0.1.8 - 2015-12-02
* https://github.com/thiagoh/co-work
* Copyright (c) 2015 Thiago Andrade; Licensed MIT */
!function(a){"use strict";var b=function(a,b,c){if("undefined"==typeof b||null===b)throw new Error("Routines must be defined");if("function"==typeof b&&(b=[b]),!(b.length<=0)){if(a="string"==typeof a?parseInt(a,10):a,isNaN(a)===!0)throw new Error("Invalid slots");if(0>a)throw new Error("Invalid slots. It must be positive");if(0===a)throw new Error("Invalid slots. It must be at least 1");c="undefined"==typeof c||"[object Array]"!==Object.prototype.toString.call(c)?[]:c;var d,e=[],f=Math.max(b.length,c.length),g=function(){var a=e.shift();"undefined"==typeof a&&e.length<=0||h(a.command,a.argsArray,a.index)},h=function(a,b,c){var d=a.apply(null,b);if("undefined"==typeof d)g();else{var e=d["finally"]||d.fin||d.then;"function"==typeof e?e.call(d,function(){g()}):g()}};for(a=Math.min(a,f),d=a;f>d;d++)e.push({command:b[d]||b[0],argsArray:(c||[])[d]||[],index:d});for(d=0;a>d;d++)h(b[d]||b[0],(c||[])[d]||[],d)}};a.work=b,a.batch=b}("object"==typeof exports&&exports||this);